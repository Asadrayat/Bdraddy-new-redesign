{% assign all_line_item_discounts = '' %}
{%- for item in cart.items -%}
  {% comment %}
    {% if forloop.first %}
      {% assign first_code = true %}
    {% else %}
      {% assign first_code = false %}
    {% endif %}
  {% endcomment %}
  {%- for discount in item.line_level_discount_allocations -%}
    {% if all_line_item_discounts == '' %}
      {% assign all_line_item_discounts = discount.discount_application.title %}
    {% else %}
      {% assign all_line_item_discounts = all_line_item_discounts
        | append: ','
        | append: discount.discount_application.title
      %}
    {% endif %}
  {%- endfor -%}
{% endfor %}
{% assign all_line_item_discounts = all_line_item_discounts | split: ',' | uniq %}
<style>
  ul.--discount-codes-wrapper {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
  }

li.discounts__discount.--discount-button {
           box-sizing: border-box;
    padding: 5px 10px;
    border: 1px solid #000;
    gap: 5px;
    font-size: 12px;
    line-height: 1;
    {% comment %} border-radius: 50px; {% endcomment %}
    max-width: max-content;
}
    button.--remove-discount {
      display: block;
      width: 20px;
      height: 20px;
      padding: 0;
      border: 0;
  }
  button.--remove-discount svg {
        display: block;
        width: 100%;
        height: 100%;
    }
</style>
<div>
  <ul class="--discount-codes-wrapper">
    {%- for discount in all_line_item_discounts -%}
      <li class="discounts__discount --discount-button">
        {{- 'icon-discount.svg' | inline_asset_content -}}
        {{ discount | escape | upcase }}
        <button
          class="--remove-discount"
          data-removecode="{{- discount | escape | upcase -}}"
          onclick="removeDiscount(this.dataset.removecode)"
        >
          <svg width="20px" height="20px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path fill="#000000" fill-rule="evenodd" d="M11.2929,3.29289 C11.6834,2.90237 12.3166,2.90237 12.7071,3.29289 C13.0976,3.68342 13.0976,4.31658 12.7071,4.70711 L9.41421,8 L12.7071,11.2929 C13.0976,11.6834 13.0976,12.3166 12.7071,12.7071 C12.3166,13.0976 11.6834,13.0976 11.2929,12.7071 L8,9.41421 L4.70711,12.7071 C4.31658,13.0976 3.68342,13.0976 3.29289,12.7071 C2.90237,12.3166 2.90237,11.6834 3.29289,11.2929 L6.58579,8 L3.29289,4.70711 C2.90237,4.31658 2.90237,3.68342 3.29289,3.29289 C3.68342,2.90237 4.31658,2.90237 4.70711,3.29289 L8,6.58579 L11.2929,3.29289 Z"/>
          </svg>
        </button>
      </li>
    {%- endfor -%}

    {%- if cart.cart_level_discount_applications.size > 0 -%}
      {%- for discount in cart.cart_level_discount_applications -%}
        <li class="discounts__discount --discount-button ">
          {{- 'icon-discount.svg' | inline_asset_content -}}
          {{ discount.title | escape | upcase }}

          <button
            class="--remove-discount"
            data-removecode="{{- discount.title | escape | upcase -}}"
            onclick="removeDiscount(this.dataset.removecode)"
          >
            <svg width="20px" height="20px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
              <path fill="#000000" fill-rule="evenodd" d="M11.2929,3.29289 C11.6834,2.90237 12.3166,2.90237 12.7071,3.29289 C13.0976,3.68342 13.0976,4.31658 12.7071,4.70711 L9.41421,8 L12.7071,11.2929 C13.0976,11.6834 13.0976,12.3166 12.7071,12.7071 C12.3166,13.0976 11.6834,13.0976 11.2929,12.7071 L8,9.41421 L4.70711,12.7071 C4.31658,13.0976 3.68342,13.0976 3.29289,12.7071 C2.90237,12.3166 2.90237,11.6834 3.29289,11.2929 L6.58579,8 L3.29289,4.70711 C2.90237,4.31658 2.90237,3.68342 3.29289,3.29289 C3.68342,2.90237 4.31658,2.90237 4.70711,3.29289 L8,6.58579 L11.2929,3.29289 Z"/>
            </svg>
          </button>
        </li>
      {%- endfor -%}
    {%- endif -%}
  </ul>
</div>
