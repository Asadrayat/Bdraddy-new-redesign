{% liquid
  assign id = section.id
%}

<style>
    .container--{{ id }} {
      display: flex;
      flex-direction: column;
      gap: 0;
    }
    .container--{{ id }}.women__collection__fist {
      flex-direction: column-reverse;
    }
    .sec-{{ id }} {
      box-sizing: border-box;
      margin-top: {{section.settings.margin_top | append: 'px'}};
      margin-bottom: {{section.settings.margin_bottom | append: 'px'}};
      padding-top: {{section.settings.padding_top | append: 'px'}};
      padding-bottom: {{section.settings.padding_bottom | append: 'px'}};
      overflow: hidden;
    }

    @media(max-width: 600px) {
      .sec-{{ id }} {
        margin-top: {{section.settings.margin_top_m | append: 'px'}};
        margin-bottom: {{section.settings.margin_bottom_m | append: 'px'}};
        padding-top: {{section.settings.padding_top_m | append: 'px'}};
        padding-bottom: {{section.settings.padding_bottom_m | append: 'px'}};
      }
    }
    #shopify-section-{{id}}{
      .top--wrapper{
        display: flex;
        justify-content: space-between;
        align-items: center;
        align-self: stretch;
        margin-bottom: var(--Spacing-Container-xl, 40px);
      }
      .title--wrapper{
        display: flex;
        max-width: 800px;
        flex-direction: column;
        justify-content: center;
        gap: var(--Spacing-Container-xs, 12px);
        flex: 1 0 0;
      }
      .title{
        margin: 0;
        color: var(--Content-Base-main, #1F2937);
        font-family: var(--font-family-Title, "Sainte Colombe");
        font-size: var(--Font-Size-Heading-H2, 48px);
        font-style: normal;
        font-weight: 400;
        line-height: var(--Line-Height-Heading-H2, 56px); /* 116.667% */
        letter-spacing: -0.96px;
      }
      .subtitle{
        margin: 0;
        color: var(--Content-Base-main, #1F2937);
        font-family: var(--font-family-Body, "Sainte Colombe");
        font-size: var(--Font-Size-Paragraph-Medium, 18px);
        font-style: normal;
        font-weight: 400;
        line-height: var(--Line-Height-Paragraph-Medium, 26px); /* 144.444% */
      }
      .arrow_btn:before, .arrow_btn:after {
          top: 50%;
          transform: translatey(-50%);
      }
      .btn-wrapper{
        @media(max-width: 768px){
          display: none;
        }
      }
      /* Swiper Navigation */
      .collection-list-wrapper{
        position: relative;
      }

  /* Swiper styles starts */
  .swiper-scrollbar-{{ section.id }} {
    position: relative !important;
    left: 0 !important;
    bottom: 0 !important;
    margin:  0;
    height: 1px !important;
    opacity: 1 !important;
    width: 100% !important;
    cursor: pointer;
    padding-block: 8px;
    background: transparent;
    padding-block: var(--Spacing-Container-xxl);
    @media(width < 768px) {

    }
    .swiper-scrollbar-drag {
      background: #1F2937;
      display: block !important;
      height: 1px;
    }
  }
  .swiper-scrollbar-{{ section.id }}::before {
    position: absolute;
    content: "";
    background: rgb(31 41 55 / 10%);
    top: 50%;
    left: 0;
    width: 100%;
    height: 1px;
  }
  .--nav-button-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
  }

  .sec-{{ id }} .swiper-button-disabled {
      opacity: .5;
  }
  .sec-{{ id }} .--nav-icon.swiper-button-lock {
      display: none;
  }
  .sec-{{ id }} .--nav-icon {
      display: flex;
      min-width: 36px;
      width: 36px;
      height: 36px;
      justify-content: center;
      align-items: center;
      gap: 8px;
      {% comment %} border: 1px solid var(--Border-Base-dense, #4B5563); {% endcomment %}
      background: #FFF;
      position: absolute;
      top: 40%;
      z-index: 1;
      cursor: pointer;
      transition: 0.5s ease;
        svg path{
        transition: 0.5s ease;
        }
        @media(max-width: 768px){
        /* display: none; */
        position: relative;
        border: 1px solid var(--Border-Base-dense, #4B5563);
      }
  }

   @media(min-width: 769px){
    .sec-{{ id }} .--nav-icon:hover{
      background: #1F2937;
      svg path{
        fill: #fff;
      }
    }

    }

  .swiper-prev-{{section.id }}.--desktop-nav {
      left: -38px;
      @media(max-width: 768px){
        display: none;
      }
  }
  .swiper-next-{{section.id }}.--desktop-nav {
      right: -38px;
       @media(max-width: 768px){
        display: none;
      }

  }
  .swiper-prev-{{section.id }}.--mobile-nav ,
  .swiper-next-{{section.id }}.--mobile-nav {
    @media(min-width: 768px){
        display: none;
    }
  }
  /* Swiper styles ends */
</style>

{% liquid
  assign shop_for = product.metafields.custom.shop_for | downcase | handleize
  assign men_col = settings.cart_drawer_collection
  assign women_col = settings.cart_drawer_collection_women
  assign mens_title = section.settings.title
  assign mens_subtitle = section.settings.subtitle
  assign mens_btn_label = section.settings.btn
  assign mens_btn_url = section.settings.btn_url
  assign womens_title = section.settings.title_w
  assign womens_subtitle = section.settings.subtitle_w
  assign womens_btn_label = section.settings.btn_w
  assign womens_btn_url = section.settings.btn_url_w
%}

<div class="container--{{ id }} {% if shop_for == "women" %}women__collection__fist{% endif %}">
  <div class="sec-{{ id }} men__colection--wrap">
    <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
      <div class="wrapper-{{ id }}">
        <div class="top--wrapper">
          <div class="title--wrapper">
            {% if mens_title != blank %}
              <h2 class="title">{{ mens_title }}</h2>
            {% endif %}
            {% if mens_subtitle != blank %}
              <h2 class="subtitle">{{ mens_subtitle }}</h2>
            {% endif %}
          </div>

          {% if mens_btn_label != blank %}
            <div class="button--wrapper desktop__only">
              <a class="arrow_btn" href="{{ mens_btn_url }}">{{ mens_btn_label }}</a>
            </div>
          {% endif %}
        </div>
        <div class="collection-list-wrapper">
          <div class="swiper swiper-{{ section.id }}">
            <div class="swiper-wrapper">
              {% for pd in men_col.products limit: section.settings.p_to_show %}
                {% unless pd == product %}
                  <div class="swiper-slide">
                    {% # render 'product-card-new-v1', product: product, loading: true %}
                    {% render 'product-card-v3', product: pd, loading: true %}
                  </div>
                {% endunless %}
              {% endfor %}
            </div>
            <div class="--nav-button-wrapper">
              <div class="swiper-scrollbar-{{ section.id }} swiper-scrollbar"></div>
              <div class="swiper-prev-{{ section.id }} --nav-icon --mobile-nav">
                {%- render 'header-icons', name: 'left' -%}
              </div>
              <div class="swiper-next-{{ section.id }} --nav-icon --mobile-nav">
                {%- render 'header-icons', name: 'right' -%}
              </div>
            </div>
          </div>
          {% comment %} starts Desktop Navigation Starts {% endcomment %}
          <div class="swiper-prev-{{ section.id }} --nav-icon --desktop-nav">
            {%- render 'header-icons', name: 'left' -%}
          </div>
          <div class="swiper-next-{{ section.id }} --nav-icon --desktop-nav">
            {%- render 'header-icons', name: 'right' -%}
          </div>
          {% comment %} starts Desktop Navigation Ends {% endcomment %}
        </div>
        {% if mens_btn_label != blank %}
          <div class="bottom--wrapper mobile__only">
            <a class="button" href="{{ mens_btn_url }}">{{ mens_btn_label }}</a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="sec-{{ id }} women__colection--wrap">
    <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
      <div class="wrapper-{{ id }}">
        <div class="top--wrapper">
          <div class="title--wrapper">
            {% if womens_title != blank %}
              <h2 class="title">{{ womens_title }}</h2>
            {% endif %}
            {% if womens_subtitle != blank %}
              <h2 class="subtitle">{{ womens_subtitle }}</h2>
            {% endif %}
          </div>

          {% if womens_btn_label != blank %}
            <div class="button--wrapper desktop__only">
              <a class="arrow_btn" href="{{ womens_btn_url }}">{{ womens_btn_label }}</a>
            </div>
          {% endif %}
        </div>
        <div class="collection-list-wrapper">
          <div class="swiper swiper-{{ section.id }}">
            <div class="swiper-wrapper">
              {% for pd in women_col.products limit: section.settings.p_to_show %}
                {% unless pd == product %}
                  <div class="swiper-slide">
                    {% # render 'product-card-new-v1', product: product, loading: true %}
                    {% render 'product-card-v3', product: pd, loading: true %}
                  </div>
                {% endunless %}
              {% endfor %}
            </div>
            <div class="--nav-button-wrapper">
              <div class="swiper-scrollbar-{{ section.id }} swiper-scrollbar"></div>
              <div class="swiper-prev-{{ section.id }} --nav-icon --mobile-nav">
                {%- render 'header-icons', name: 'left' -%}
              </div>
              <div class="swiper-next-{{ section.id }} --nav-icon --mobile-nav">
                {%- render 'header-icons', name: 'right' -%}
              </div>
            </div>
          </div>
          {% comment %} starts Desktop Navigation Starts {% endcomment %}
          <div class="swiper-prev-{{ section.id }} --nav-icon --desktop-nav">
            {%- render 'header-icons', name: 'left' -%}
          </div>
          <div class="swiper-next-{{ section.id }} --nav-icon --desktop-nav">
            {%- render 'header-icons', name: 'right' -%}
          </div>
          {% comment %} starts Desktop Navigation Ends {% endcomment %}
        </div>
        {% if womens_btn_label != blank %}
          <div class="bottom--wrapper mobile__only">
            <a class="button" href="{{ womens_btn_url }}">{{ womens_btn_label }}</a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const isMobile = window.innerWidth <= 768;
  const navClass = isMobile ? '--mobile-nav' : '--desktop-nav';
  
  new Swiper(".sec-{{ id }}.men__colection--wrap .swiper-{{ section.id }}", {
    slidesPerView: {{ section.settings.slides_per_view_mbl }},
    spaceBetween: 16,
    scrollbar: {
      el: ".sec-{{ id }}.men__colection--wrap .swiper-scrollbar-{{ section.id }}.swiper-scrollbar",
      draggable: true
    },
    navigation: {
      nextEl: `.sec-{{ id }}.men__colection--wrap .swiper-next-{{ section.id }}.${navClass}`,
      prevEl: `.sec-{{ id }}.men__colection--wrap .swiper-prev-{{ section.id }}.${navClass}`
    },
    breakpoints: {
      768: {
        slidesPerView: {{ section.settings.slides_per_view }},
        spaceBetween: 24
      }
    }
  });
});
document.addEventListener('DOMContentLoaded', function () {
  const isMobile = window.innerWidth <= 768;
  const navClass = isMobile ? '--mobile-nav' : '--desktop-nav';
  
  new Swiper(".sec-{{ id }}.women__colection--wrap .swiper-{{ section.id }}", {
    slidesPerView: {{ section.settings.slides_per_view_mbl }},
    spaceBetween: 16,
    scrollbar: {
      el: ".sec-{{ id }}.women__colection--wrap .swiper-scrollbar-{{ section.id }}.swiper-scrollbar",
      draggable: true
    },
    navigation: {
      nextEl: `.sec-{{ id }}.women__colection--wrap .swiper-next-{{ section.id }}.${navClass}`,
      prevEl: `.sec-{{ id }}.women__colection--wrap .swiper-prev-{{ section.id }}.${navClass}`
    },
    breakpoints: {
      768: {
        slidesPerView: {{ section.settings.slides_per_view }},
        spaceBetween: 24
      }
    }
  });
});
</script>

{% schema %}
{
  "name": "Featured Collection",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width Section",
      "default": false
    },
    {
      "type": "header",
      "content": "Men Info"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "text",
      "id": "btn",
      "label": "Button Label"
    },
    {
      "type": "url",
      "id": "btn_url",
      "label": "Button Url"
    },
    {
      "type": "header",
      "content": "Women Info"
    },
    {
      "type": "text",
      "id": "title_w",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "subtitle_w",
      "label": "Subtitle"
    },
    {
      "type": "text",
      "id": "btn_w",
      "label": "Button Label"
    },
    {
      "type": "url",
      "id": "btn_url_w",
      "label": "Button Url"
    },
    {
      "type": "range",
      "id": "p_to_show",
      "min": 3,
      "max": 12,
      "step": 1,
      "label": "Product To Show",
      "default": 6
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "range",
      "id": "slides_per_view",
      "min": 3,
      "max": 6,
      "step": 0.2,
      "label": "Slides Per View",
      "default": 3
    },
    {
      "type": "range",
      "id": "slides_per_view_mbl",
      "min": 1,
      "max": 2,
      "step": 0.2,
      "label": "Slides Per View On Mobile",
      "default": 1.2
    },
    {
      "type": "header",
      "content": "Section Spacing Desktop"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 48
    },
    {
      "type": "header",
      "content": "Section Spacing Mobile"
    },
    {
      "type": "range",
      "id": "margin_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 32
    }
  ],
  "presets": [
    {
      "name": "Combined Related Collection"
    }
  ]
}
{% endschema %}
