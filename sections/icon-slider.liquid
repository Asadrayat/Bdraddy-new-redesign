{% liquid
  assign id = section.id
%}

<style>
  #shopify-section-{{id}} {
    box-sizing: border-box;
    margin-top: {{section.settings.margin_top | append: 'px'}};
    margin-bottom: {{section.settings.margin_bottom | append: 'px'}};
    padding-top: {{section.settings.padding_top | append: 'px'}};
    padding-bottom: {{section.settings.padding_bottom | append: 'px'}};
    background: {{ section.settings.bg }};
  }
  .wrapper-{{ id }}  .swiper-wrapper{
    transition-timing-function: linear !important;
  }
  .wrapper-{{ id }}  .swiper-slide{
    height: 120px;
    width: auto;
  }
  .badge__img {
    max-width: 70px;
    @media(width < 768px) {
      max-width: 50px;
    }
  }
  .badge__img img {
    width: 100%;
    height: auto;
    aspect-ratio: 1;
    object-fit: contain;
    object-position: center;
  }
  .wrapper-{{ id }} .content__wrapper {
    color: #000;
    font-family: var(--font-family-Title, Krylon);
    font-size: var(--Font-Size-Heading-H4, 20px);
    font-style: normal;
    font-weight: 100;
    line-height: var(--Line-Height-Heading-H4, 24px);
    width: max-content;
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }
  .wrapper-{{ id }} h4{
    margin: 0;
    text-align: center;
    color: {{ section.settings.content_color }};
  }
  .wrapper-{{ id }} p{
    font-size: 12px;
    line-height: 130%;
    font-family: var(--font-family-Body);
    margin: 0;
    text-align: center;
    color: {{ section.settings.content_color }};
    @media(max-width: 600px) {
       {% comment %} font-size: 16px; {% endcomment %}
    }
  }

  .wrapper-{{ id }} .swiper-slide{
    display: flex;
    justify-content: center;
  }
  .wrapper-{{ id }}.has__no_slide .icon__wrapper{
    display: flex;
    flex-wrap: wrap;
    gap: 24px 120px;
  }
  @media(max-width: 600px) {
    #shopify-section-{{id}} {
      margin-top: {{section.settings.margin_top_m | append: 'px'}};
      margin-bottom: {{section.settings.margin_bottom_m | append: 'px'}};
      padding-top: {{section.settings.padding_top_m | append: 'px'}};
      padding-bottom: {{section.settings.padding_bottom_m | append: 'px'}};
    }
    .wrapper-{{ id }}.has__no_slide .icon__wrapper{
      display: grid;
      grid-template-columns: repeat(3,1fr);
      gap: 16px;
    }
    .wrapper-{{ id }}.has__no_slide a.wrapper__ {
        display: flex;
        justify-content: center;
    }
  }
</style>

<div class="sec-{{ id }}">
  <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
    <div class="wrapper-{{ id }} {% unless section.settings.enable_slide %}has__no_slide{% endunless %}">
      {% if section.settings.enable_slide %}
        <div class="swiper badges-{{ id }}">
          <div class="swiper-wrapper justify-{{ section.settings.alignment }}">
            {% for block in section.blocks %}
              <div class="swiper-slide">
                <a
                  class="wrapper__"
                  {% if block.settings.url %}
                    href="{{ block.settings.url }}"
                  {% endif %}
                >
                  <div class="content__wrapper">
                    {% if block.settings.badge != blank %}
                      <div class="badge__img">
                        {{
                          block.settings.badge
                          | image_url: width: block.settings.badge.width
                          | image_tag: loading: 'lazy'
                        }}
                      </div>
                    {% else %}
                      <div class="badge__img">
                        <img
                          src="https://cdn.shopify.com/s/files/1/0012/9954/6178/files/download.png?v=1768724431"
                          alt="Placeholder image"
                          loading="lazy"
                        >
                      </div>
                    {% endif %}
                    {% if block.settings.text != blank %}
                      <div>{{ block.settings.text }}</div>
                    {% endif %}
                  </div>
                </a>
              </div>
            {% endfor %}
          </div>
        </div>
      {% else %}
        <div class="icon__wrapper justify-{{ section.settings.alignment }}">
          {% for block in section.blocks %}
            <a
              class="wrapper__"
              {% if block.settings.url %}
                href="{{ block.settings.url }}"
              {% endif %}
            >
              <div class="content__wrapper">
                {% if block.settings.badge != blank %}
                  <div class="badge__img">
                    {{
                      block.settings.badge
                      | image_url: width: block.settings.badge.width
                      | image_tag: loading: 'lazy'
                    }}
                  </div>
                {% else %}
                  <div class="badge__img">
                    <img
                      src="https://cdn.shopify.com/s/files/1/0012/9954/6178/files/download.png?v=1768724431"
                      alt="Placeholder image"
                      loading="lazy"
                    >
                  </div>
                {% endif %}
                {% if block.settings.text != blank %}
                  <div>{{ block.settings.text }}</div>
                {% endif %}
              </div>
            </a>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% if section.settings.enable_slide %}
  <script defer="defer">
    document.addEventListener('DOMContentLoaded', () => {
      const swiperOptions = {
        slidesPerView: 'auto',
        spaceBetween: 24,
        breakpoints: {
          500: {
            slidesPerView: 'auto',
            spaceBetween: 64,
          },
          850: {
            slidesPerView: 'auto',
            spaceBetween: 120,
          },
          969: {
            slidesPerView: 'auto',
            spaceBetween: 120,
          },
          1200: {
            slidesPerView: 'auto',
            spaceBetween: 120,
          },
        },
      };

      // Conditionally add autoplay if screen width < 600
      if (screen.width < 600) {
        swiperOptions.loop = true;
        swiperOptions.speed = 5000;
        swiperOptions.autoplay = {
          delay: 0,
          disableOnInteraction: false,
          pauseOnMouseEnter: true,
        };
      }

      new Swiper('.badges-{{ id }}.swiper', swiperOptions);
    });
  </script>
{% endif %}

{% schema %}
{
  "name": "Icon Slider",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width Section",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_slide",
      "label": "Enable Slide",
      "default": false
    },
    {
      "type": "color",
      "id": "bg",
      "label": "Background Color",
      "default": "#fcfaf6"
    },
    {
      "type": "color",
      "id": "content_color",
      "label": "Content Color"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "header",
      "content": "Section Spacing Desktop"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 48
    },
    {
      "type": "header",
      "content": "Section Spacing Mobile"
    },
    {
      "type": "range",
      "id": "margin_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 32
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "image_picker",
          "id": "badge",
          "label": "Badge"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Badge Text",
          "default": "<p>Fast Shipping<p>"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Url"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Icon Slider",
      "blocks": [
        {
          "type": "text",
          "settings": {
            "text": "<p>Complimentary Shipping<br/>On Orders $150+</p>",
            "url": "shopify://pages/shipping-handling"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Complimentary Shipping<br/>On Orders $150+</p>",
            "url": "shopify://pages/shipping-handling"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Complimentary Shipping<br/>On Orders $150+</p>",
            "url": "shopify://pages/shipping-handling"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Complimentary Shipping<br/>On Orders $150+</p>",
            "url": "shopify://pages/shipping-handling"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Complimentary Shipping<br/>On Orders $150+</p>",
            "url": "shopify://pages/shipping-handling"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Complimentary Shipping<br/>On Orders $150+</p>",
            "url": "shopify://pages/shipping-handling"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Complimentary Shipping<br/>On Orders $150+</p>",
            "url": "shopify://pages/shipping-handling"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Complimentary Shipping<br/>On Orders $150+</p>",
            "url": "shopify://pages/shipping-handling"
          }
        }
      ]
    }
  ]
}
{% endschema %}
