{% liquid
  assign id = section.id
%}

<style>
  #shopify-section-{{id}} {
    box-sizing: border-box;
    margin-top: {{section.settings.margin_top | append: 'px'}};
    margin-bottom: {{section.settings.margin_bottom | append: 'px'}};
    padding-top: {{section.settings.padding_top | append: 'px'}};
    padding-bottom: {{section.settings.padding_bottom | append: 'px'}};
    max-width: 100vw;
    overflow:hidden;
    background-color: {{ section.settings.bg_color }};
    .media__card {
    border-radius: 0;
    border: 1px solid rgba(0, 0, 0, 0.60);
    background: rgba(0, 0, 0, 0.41);
    display: flex;
    padding: var(--Spacing-Container-lg, 24px);
    justify-content: start;
    align-items: flex-start;
    gap: var(--Spacing-Container-md, 16px);
    align-self: stretch;
    position: absolute;
    bottom: var(--Spacing-Container-md, 16px);
    left: var(--Spacing-Container-md, 16px);
    width: calc(100% - (var(--Spacing-Container-md, 16px)) * 2);
        span.icon {
            border-radius: 48px;
            border: 1px solid rgba(0, 0, 0, 0.60);
            background: rgba(31, 41, 55, 0.60);
            display: flex;
            padding: var(--Spacing-Container-sm, 12px);
            align-items: flex-start;
            gap: var(--Spacing-Container-xs, 12px);
        }
        svg {
            width: 24px;
            height: 24px;
            aspect-ratio: 1/1;
        }
        p {
            color: #fff;
            margin: 0;
            line-height: var(--Line-Height-Paragraph-Small, 20px); /* 142.857% */
            font-family: var(--font-family-Body, Gotham);
            font-size: var(--Font-Size-Paragraph-Small, 14px);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        strong {
            color: var(--Content-Inverted-main, #F3F4F6);
            font-family: var(--font-family-Heading, "Sainte Colombe");
            font-size: var(--Font-Size-Heading-H3, 20px);
            font-style: normal;
            font-weight: 700;
            line-height: var(--Line-Height-Heading-H3, 24px);
        }
        em {
            display: block;
            font-style: normal;
        }
    }
    .text__  {
        color: var(--Content-Base-main, #1F2937);
        p {
            /* Paragraph/Medium */
            font-family: var(--font-family-Body, Gotham);
            font-size: var(--Font-Size-Paragraph-Medium, 16px);
            font-style: normal;
            font-weight: 400;
            line-height: var(--Line-Height-Paragraph-Medium, 24px); /* 150% */
            letter-spacing: -0.32px;
            margin: 0;
        }
    }
    .text__.highlighted {
        color: #000;
        padding-left: var(--Spacing-Container-lg, 24px);
        border-left: 2px solid #1E3B2D;
        p {
            font-size: 20px;
            font-weight: 700;
            line-height: 32px;
            letter-spacing: 0;
        }
    }
    .card__wrapper {
        display: flex;
        align-items: flex-start;
        gap: var(--Spacing-Container-md, 16px);
        align-self: stretch;
    }
    .card__block {
        display: flex;
        flex-direction: column;
        gap: var(--Spacing-Container-xs);
        border-radius: 0;
        border: 1px solid #C6C6C6;
        background: #FFF;
        padding: var(--Spacing-Container-lg, 24px);
        flex: 1 0 0;
        transition: all 0.4s ease-in-out;
        h2 {
            color: #1F3E2F;
            font-family: var(--font-family-Heading, "Sainte Colombe");
            font-size: 32px;
            font-style: normal;
            font-weight: 700;
            line-height: var(--Line-Height-Heading-H2, 40px);
            text-transform: capitalize;
            margin: 0;
        }
        p {
            color: #1F3E2F;
            font-family: var(--font-family-Body, Gotham);
            font-size: var(--Font-Size-Paragraph-Small, 14px);
            font-style: normal;
            font-weight: 400;
            line-height: var(--Line-Height-Paragraph-Small, 20px);
            margin: 0;
        }
        &:hover {
          transform: scale(1.001);
          box-shadow: 1px 1px 4px #1f2937a8;
        }
    }
  }

  @media(max-width: 768px) {
    #shopify-section-{{id}} {
      margin-top: {{section.settings.margin_top_m | append: 'px'}};
      margin-bottom: {{section.settings.margin_bottom_m | append: 'px'}};
      padding-top: {{section.settings.padding_top_m | append: 'px'}};
      padding-bottom: {{section.settings.padding_bottom_m | append: 'px'}};
    }
  }
  .sec-{{ id }} .sec--title{
    color: var(--Content-Base-main, #1F2937);
    margin: 0 0 var(--Spacing-Container-xxl, 48px);
    font-family: var(--font-family-Heading, "Sainte Colombe");
    font-size: var(--Font-Size-Heading-H2, 40px);
    font-style: normal;
    font-weight: 700;
    line-height: var(--Line-Height-Heading-H2, 40px); /* 100% */
    text-transform: uppercase;
  }
  .wrapper-{{ id }} {
    display: grid;
    grid-template-columns: repeat({{section.blocks.size}}, 1fr);
    grid-gap: var(--Spacing-Container-xxl, 40px);
    @media(max-width: 768px) {
      grid-template-columns: 1fr;
      {% comment %} grid-gap: 24px; {% endcomment %}
      box-sizing: border-box;
    }

    .img-wrapper{
      position: relative;
      overflow: hidden;
      background: #FFF;
      box-shadow: 0 4px 1.4px 0 rgba(0, 0, 0, 0.25);
      line-height: 0;
      border: 12px solid #fff;
      height: max-content;
      @media(max-width: 768px) {
        grid-row: {{ section.settings.image_position_mobile }};
        grid-columns: 1/2;
      }
      img{
        width: 100%;
        height: auto;
        {% if section.settings.imagesize == "potrait" %}
        aspect-ratio: 4/5;
        {% elsif section.settings.imagesize == "original" %}
          aspect-ratio: unset;
        {% else %}
          aspect-ratio: 1;
        {% endif %}
        transition: all 0.4s ease-in-out;
        object-fit: cover;
        @media(max-width: 768px) {
          aspect-ratio: 4/3;
        }
      }
      &:hover img{
        transform: scale(1.15);
      }
      svg{
        width: 100%;
        height: auto;
        aspect-ratio: 4/5;
        background: rgba(0,0,0,10%);
      }
    }
    .img-wrapper:hover img {
      scale: 1.05;
    }
    .hide_image_border.img-wrapper {
      background: transparent;
      box-shadow: unset;
      border: none;
    }
    .hide_image_border.img-wrapper:hover img {
      scale: 1;
    }
    .normal__text__ {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: var(--Spacing-Container-lg);
    }
    .text-wrapper {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: var(--Spacing-Container-xxl);
      .text{
        color: var(--Content-Base-main, #1F2937);
        font-family: var(--font-family-Body, "Sainte Colombe");
        font-size: var(--Font-Size-Paragraph-Regular, 16px);
        font-style: normal;
        font-weight: 400;
        line-height: var(--Line-Height-Paragraph-Regular, 24px); /* 150% */
        margin: 0;
      }
      .text em {
        display: block;
        font-style: normal;
        @media(max-width: 768px) {
          display: unset;
        }
      }
      .text *{
        text-align: left;
        {% if template.suffix == 'size-chart' %}
          margin-bottom: 32px;
        {% endif %}
      }
      .text p:first-child{
        margin-top: 0;
      }
      .text p:last-child{
        margin-bottom: 0;
      }
      .text ul {
        display: block;
        margin-block-start: var(--Spacing-Container-lg);
        margin-block-end: 1em;
        padding-inline-start: 20px;
        unicode-bidi: isolate;
        li {
            list-style-type: disc;
            margin-block-end: 8px;
        }
      }

      @media(max-width: 768px) {
        .sub-title{
          margin: 0;
        }
        .title{

          margin-bottom: 0px;
        }
        .text{
          font-size: var(--Font-Size-Paragraph-Large, 15px);
          {% comment %} font-size: 12px;
          line-height: 16px; {% endcomment %}
          margin: var(--Spacing-Container-sm) 0 0 0;
        }
        .buttonX_.button{
          /* width: 100%; */
          /* font-size: 20px; */
          /* padding: 10px 0px; */
          margin-top: 16px;
        }
      }
    }
  }

  @media screen and (min-width: 769px){
    {% if section.settings.content__style == 'media' %}
      .sec-{{ id }} .img-wrapper{
        order: 1;
      }
      .sec-{{ id }} .text-wrapper{
        order: 2;
      }
    {% elsif section.settings.content__style == 'texts' %}
      .sec-{{ id }} .img-wrapper{
        order: 2;
      }
      .sec-{{ id }} .text-wrapper{
        order: 1;
      }
    {% endif %}
  }

  @media screen and (max-width: 768px){
    .text-wrapper{
      /* padding: 16px; */
    }
    .img-wrapper {
        grid-column: 1/2;
        grid-row: 1/2;
    }
  }
</style>

<div
  class="sec-{{ id }} "
  id="{{ section.settings.sec_id }}"
>
  <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
    {% if section.settings.sec__title %}
      <p class="sec--title">{{ section.settings.sec__title }}</p>
    {% endif %}
    <div class="wrapper-{{ id }}">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'image' %}
            <div
              class="img-wrapper {% if section.settings.hide_image_border %}hide_image_border{% endif %} %}"
            >
              {% assign selected_image = block.settings.image_desktop %}

              {% unless selected_image == blank %}
                {{ selected_image | image_url: width: 1000 | image_tag: loading: 'lazy', alt: shop.name }}

              {% else %}
                {{ 'image' | placeholder_svg_tag }}
              {% endunless %}
              {% unless block.settings.info == blank %}
              <div class="media__card">
                <span class="icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="21" height="22" viewBox="0 0 21 22" fill="none">
                    <path d="M1.69781 16.4562C1.56495 16.2272 1.49579 15.9669 1.4975 15.7021C1.4992 15.4374 1.57172 15.178 1.70751 14.9507L4.09265 10.9004L4.63247 13.2798L6.09529 12.9479L4.97573 8.01315L0.0410125 9.13272L0.372887 10.5955L2.86425 10.0303L0.414934 14.1895C0.146599 14.6452 0.00347513 15.1637 6.24895e-05 15.6925C-0.00335015 16.2213 0.13307 16.7416 0.395501 17.2007C0.657933 17.6598 1.03705 18.0413 1.49444 18.3067C1.95183 18.5721 2.47124 18.7119 3.00004 18.7119H6.86418L8.36419 17.2119H3.00004C2.73532 17.2135 2.47497 17.1443 2.24599 17.0114C2.01701 16.8786 1.82775 16.6869 1.69781 16.4562ZM11.7783 2.239L14.2977 6.51719L11.9984 6.15845L11.7671 7.6405L16.7668 8.42054L17.5468 3.42086L16.0648 3.18962L15.6488 5.8554L13.0709 1.47784C12.8059 1.0278 12.428 0.65473 11.9746 0.395535C11.5212 0.13634 11.008 0 10.4857 0C9.96349 0 9.45027 0.13634 8.99687 0.395535C8.54346 0.65473 8.16558 1.0278 7.90059 1.47784L6.02845 4.6569L6.51628 6.78456L9.19312 2.239C9.32562 2.014 9.51456 1.82748 9.74125 1.6979C9.96795 1.56832 10.2245 1.50016 10.4857 1.50016C10.7468 1.50016 11.0034 1.56832 11.2301 1.6979C11.4567 1.82748 11.6457 2.014 11.7782 2.239H11.7783ZM20.5567 14.1895L18.3129 10.3794L16.3841 10.0601L19.2641 14.9507C19.3983 15.1785 19.4699 15.4378 19.4716 15.7022C19.4733 15.9666 19.405 16.2268 19.2738 16.4563C19.1426 16.6858 18.953 16.8766 18.7243 17.0093C18.4956 17.142 18.2359 17.2119 17.9715 17.2119H12.7471L14.5452 15.4138L13.4845 14.3533L9.90647 17.9313L13.4845 21.5095L14.5452 20.4488L12.8084 18.712H17.9715C18.5003 18.712 19.0197 18.5722 19.4771 18.3069C19.9345 18.0415 20.3136 17.6599 20.576 17.2008C20.8385 16.7417 20.9749 16.2214 20.9715 15.6926C20.9681 15.1638 20.8249 14.6453 20.5566 14.1897L20.5567 14.1895Z" fill="white"/>
                  </svg>
                </span>
                
                  <p>{{ block.settings.info }}</p>                
              </div>
              {% endunless %}
            </div>
          {% when 'text' %}
            {% assign selected_text_content1 = block.settings.text_general %}
            {% assign selected_text_content2 = block.settings.text_general_1 %}
            {% assign selected_text_content3 = block.settings.text_general_2 %}

            <div class="text-wrapper" style="justify-content: {{ block.settings.alignment }}">
              {% unless selected_text_content1 == blank %}
                <div class="text__ highlighted">{{ selected_text_content1 }}</div>
              {% endunless %}
              <div class="normal__text__">
                {% unless selected_text_content2 == blank %}
                  <div class="text__">{{ selected_text_content2 }}</div>
                {% endunless %}
                {% unless selected_text_content3 == blank %}
                  <div class="text__">{{ selected_text_content3 }}</div>
                {% endunless %}
              </div>
              <div class="card__wrapper">
                {% unless block.settings.block1 == blank %}
                  <div class="card__block">{{ block.settings.block1 }}</div>
                {% endunless %}
                {% unless block.settings.block2 == blank %}
                  <div class="card__block">{{ block.settings.block2 }}</div>
                {% endunless %}
              </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Media Label V2",
  "class": "lazyload",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color"
    },
    {
      "type": "text",
      "id": "sec_id",
      "label": "Section Id"
    },
    {
      "type": "text",
      "id": "sec__title",
      "label": "Title"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width Section",
      "default": false
    },
    {
      "type": "select",
      "id": "imagesize",
      "label": "Image Type",
      "default": "potrait",
      "options": [
        {
          "label": "Potrait",
          "value": "potrait"
        },
        {
          "label": "Original",
          "value": "original"
        },
        {
          "label": "Square",
          "value": "square"
        }
      ]
    },
    {
      "type": "select",
      "id": "content__style",
      "label": "Content Style",
      "options": [
        {
          "value": "media",
          "label": "Media"
        },
        {
          "value": "texts",
          "label": "Texts"
        }
      ],
      "default": "media"
    },
    {
      "type": "checkbox",
      "id": "hide_image_border",
      "label": "Hide Image Border",
      "default": true
    },
    {
      "type": "header",
      "content": "Section Spacing Desktop"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 24
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    },
    {
      "type": "header",
      "content": "Section Spacing Mobile"
    },
    {
      "type": "range",
      "id": "margin_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 24
    },
    {
      "type": "range",
      "id": "margin_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    }
  ],
  "max_blocks": 2,
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "image_desktop",
          "label": "Desktop Image General"
        },
        {
          "type": "inline_richtext",
          "id": "info",
          "label": "Info"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "alignment",
          "label": "Vertical alignment",
          "options": [
            {
              "value": "top",
              "label": "Top"
            },
            {
              "value": "center",
              "label": "Middle"
            },
            {
              "value": "end",
              "label": "Bottom"
            }
          ],
          "default": "center"
        },
        {
          "type": "richtext",
          "id": "text_general",
          "label": "Text 1"
        },
        {
          "type": "richtext",
          "id": "text_general_1",
          "label": "Text 2"
        },
        {
          "type": "richtext",
          "id": "text_general_2",
          "label": "Text 3"
        },
        {
          "type": "richtext",
          "id": "block1",
          "label": "Block 1"
        },
        {
          "type": "richtext",
          "id": "block2",
          "label": "Block 2"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Media Label V2"
    }
  ]
}
{% endschema %}
