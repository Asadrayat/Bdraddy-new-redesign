{% liquid
  assign id = section.id
%}

<style>
  #shopify-section-{{id}} {
    box-sizing: border-box;
    margin-top: {{section.settings.margin_top | append: 'px'}};
    margin-bottom: {{section.settings.margin_bottom | append: 'px'}};
    padding-top: {{section.settings.padding_top | append: 'px'}};
    padding-bottom: {{section.settings.padding_bottom | append: 'px'}};
    max-width: 100vw;
    overflow:hidden;
    background-color: {{ section.settings.bg_color }};
  }

  @media(max-width: 768px) {
    #shopify-section-{{id}} {
      margin-top: {{section.settings.margin_top_m | append: 'px'}};
      margin-bottom: {{section.settings.margin_bottom_m | append: 'px'}};
      padding-top: {{section.settings.padding_top_m | append: 'px'}};
      padding-bottom: {{section.settings.padding_bottom_m | append: 'px'}};
    }
  }


  .sec-{{ id }}{
    .title--wrapper p{
        color: #000;
        margin: 0 0 var(--Spacing-Container-lg, 24px);
        font-family: var(--font-family-Heading, Gotham);
        font-size: var(--Font-Size-Heading-H3, 20px);
        font-style: normal;
        font-weight: 700;
        line-height: var(--Line-Height-Heading-H3, 24px); /* 120% */
        text-transform: uppercase;   
        @media(max-width: 768px) {
            font-size: 17px;
            line-height: var(--Line-Height-Heading-H3, 20px); /* 117.647% */     
            margin: 0 0 var(--Spacing-Container-lg, 16px);
        }
    }
   }
  .wrapper-{{ id }} {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
    grid-gap: var(--Spacing-Container-xxl, 40px);
    @media(max-width: 1440px) {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1.5fr);
    }
    @media(max-width: 768px) {
      grid-template-columns: minmax(0, 1fr);
      grid-gap: 24px;
      box-sizing: border-box;
    }
    .img-wrapper{
      position: relative;
      overflow: hidden;
    background: #FFF;
    box-shadow: 0 4px 1.4px 0 rgba(0, 0, 0, 0.25);
    line-height: 0;
    height: max-content;
    border: 12px solid #fff;     
      @media(max-width: 768px) {
        display: none;
      }
      img{
        width: 100%;
        height: auto;
        {% if section.settings.imagesize == "potrait" %}
        aspect-ratio: 4/5;
        {% else %}
          aspect-ratio: 1;
        {% endif %}
        transition: all 0.4s ease-in-out;
        object-fit: cover;
      }
      svg{
        width: 100%;
        height: auto;
        aspect-ratio: 4/5;
        background: rgba(0,0,0,10%);
      }
    }
    .img-wrapper:hover img {
      scale: 1.05;
    }
    .text-wrapper {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      max-width: 700px;
      .title{
        margin: 0 ;
        text-align: left; 
        color: #000;
        font-family: var(--font-family-Heading, Gotham);
        font-size: 28px;
        font-style: normal;
        font-weight: 700;
        line-height: 38px; /* 135.714% */
        letter-spacing: -0.84px;
        text-transform: uppercase;
        @media(max-width: 768px) {
            font-size: 20px;
            line-height: 32px; /* 160% */
            letter-spacing: -0.6px;
        }
      }

      @media(max-width: 768px) {
        .title{
          margin-bottom: 0px;
        }
      }
    }

.content--warpper {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--Spacing-Container-xxl, 48px);
      @media(max-width: 768px) {
        gap: 32px;  
      }
}


  }

  @media screen and (max-width: 768px){
    .text-wrapper{

    }
    .img-wrapper {

    }
  }
</style>

<div
  class="sec-{{ id }} "
>
  <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
    {% if section.settings.sec_title %}
        <div class="title--wrapper">
            <p>{{ section.settings.sec_title }}</p>
        </div>
    {% endif %}
    <div class="wrapper-{{ id }}">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'image' %}
            <div class="img-wrapper">
              {% unless block.settings.image_desktop == blank %}
                <picture>
                  <source
                    media="(min-width:1920px)"
                    data-srcset="{{ block.settings.image_desktop | image_url: width: 1900 }}"
                  >
                  <source
                    media="(min-width:1600px)"
                    data-srcset="{{ block.settings.image_desktop | image_url: width: 1600 }}"
                  >
                  <source
                    media="(min-width:1440px)"
                    data-srcset="{{ block.settings.image_desktop | image_url: width: 1400 }}"
                  >
                  <source
                    media="(min-width:1024px)"
                    data-srcset="{{ block.settings.image_desktop | image_url: width: 1000 }}"
                  >
                  <source media="(min-width:650px)" srcset="{{ block.settings.image_desktop | image_url: width: 600 }}">

                  {% unless block.settings.image_mobile == blank %}
                    {{
                      block.settings.image_mobile
                      | image_url: width: 400
                      | image_tag: loading: 'lazy', class: 'lazyload'
                    }}
                  {% else %}
                    {{
                      block.settings.image_desktop
                      | image_url: width: 400
                      | image_tag: loading: 'lazy', class: 'lazyload'
                    }}
                  {% endunless %}
                </picture>
              {% else %}
                {{ 'image' | placeholder_svg_tag }}
              {% endunless %}
            </div>
          {% when 'text' %}
            <div class="content--warpper">
                <div class="text-wrapper">
                {% unless block.settings.title == blank %}
                    <h2 class="title">{{ block.settings.title }}</h2>
                {% endunless %}
                </div>
                <div class="block--img-wrapper">
                {% unless block.settings.block_img == blank %}
                    <picture>
                    <source
                        media="(min-width:1920px)"
                        data-srcset="{{ block.settings.block_img | image_url: width: 408 }}"
                    >
                    <source
                        media="(min-width:1600px)"
                        data-srcset="{{ block.settings.block_img | image_url: width: 408 }}"
                    >
                    <source
                        media="(min-width:1440px)"
                        data-srcset="{{ block.settings.block_img | image_url: width: 408 }}"
                    >
                    <source
                        media="(min-width:1024px)"
                        data-srcset="{{ block.settings.block_img | image_url: width: 360 }}"
                    >
                    <source media="(min-width:650px)" srcset="{{ block.settings.block_img | image_url: width: 360 }}">

                    {% unless block.settings.block_img == blank %}
                        {{
                        block.settings.block_img
                        | image_url: width: 400
                        | image_tag: loading: 'lazy', class: 'lazyload'
                        }}
                    {% endunless %}
                    </picture>
                {% else %}
                    {{ 'image' | placeholder_svg_tag }}
                {% endunless %}
                </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Block Image Text Grid",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width Section",
      "default": true
    },
    {
      "type": "text",
      "id": "sec_title",
      "label": "Title"
    },
    {
      "type": "select",
      "id": "imagesize",
      "label": "Image Type",
      "default": "potrait",
      "options": [
        {
          "label": "Potrait",
          "value": "potrait"
        },
        {
          "label": "Square",
          "value": "square"
        }
      ]
    },
    {
      "type": "select",
      "id": "content__style",
      "label": "Content Style",
      "options": [
        {
          "value": "media",
          "label": "Media"
        },
        {
          "value": "texts",
          "label": "Texts"
        }
      ],
      "default": "media"
    },
    {
      "type": "header",
      "content": "Section Spacing Desktop"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 24
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    },
    {
      "type": "header",
      "content": "Section Spacing Mobile"
    },
    {
      "type": "range",
      "id": "margin_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 24
    },
    {
      "type": "range",
      "id": "margin_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    }
  ],
  "max_blocks": 2,
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "limit": 1,
      "settings": [

        {
          "type": "image_picker",
          "id": "image_desktop",
          "label": "Desktop Image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Mobile Image"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Title"
        },
        {
            "type": "image_picker",
            "id": "block_img",
            "label": "Block Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Block Image Text Grid"
    }
  ]
}
{% endschema %}
